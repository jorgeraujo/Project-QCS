<html>
  <head>
      <link rel="stylesheet" type="text/css" href="style.css">
      <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="charset" content="utf-8">
      <script src="jquery-3.2.1.min.js"></script>
      <title>Insulin Calculator</title>
  </head>
  <body>
      <div id="title">
        <p>Insulin Calculator</p>
      </div>

      </div>
      <div class="dropdown">
          <button onclick="myFunction()" class="dropbtn">Select Your Type of Insulin</button>
          <div id="myDropdown" class="dropdown-content">
              <button onclick="chooseType('div1')" class="dropdown-button" href="#">Mealtime Insulin Dose - Standard Insulin Sensitivity</button>
              <button onclick="chooseType('div2')" class="dropdown-button" href="#">Mealtime Insulin Dose - Personal Insulin Sensitivity</button>
              <button onclick="chooseType('div3')" class="dropdown-button" href="#">Background Insulin Dose</button>
          </div>
      </div>
      
      <div id="testDiv" class="test">
        <p>Meal Time Insulin Dose</p>
        <div class="formulary-div">
          <form action="mealtimeInsulinDose.jsp" method="get">

            <ul>
              <li class="titles">Total Grams of Carbohydrates in the Meal: <input type="number" id="input1_1" name="input1_1" min="60" max="120" required ></li>
              <li class="titles">Total Grams Processed by 1 unit of rapid acting insulin: <input type="number" value="12" id="input1_2" name="input1_2" min="10" max="15" required ></li>
              <li class="titles">Actual blood sugar level measured before the meal: <input type="number" id="input1_3" name="input1_3" min="120" max="250" required ></li>
              <li class="titles">Target blood sugar before the meal: <input type="number" id="input1_4" name="input1_4" min="80" max="120" required ></li>
              <li class="titles">Individual Sensitivity: <input type="number" id="input1_5" name="input1_5" value ="50" min="15" max="100" required ></li>
            </ul>

            <button class="drop-submit-button" name="action" value="calculateInsuline" type="submit">Calculate Insuline</button>

          </form>
        </div>
        
      </div>

      <div id="testDiv2" class="test">
        <p>Background Insulin Dose</p>
        <div class="formulary-div">
          <form action="backgroundInsulinDose.jsp" method="get">

            <ul>
              <li class="titles">Weight in kilograms: <input type="number" id="input3_1" name="input3_1" min="60" max="120" required ></li>
            </ul>

            <button class="drop-submit-button" name="action" value="calculateInsuline" type="submit">Calculate Insuline</button>

          </form>
        </div>
        
      </div>

       <div id="testDiv3" class="test">
        <p>Personal Sensitivity To Insulin</p>
        <div class="formulary-div">
          <form action="personalSensitivityToInsulin.jsp" method="get">

              <p id="physic_title">Total Grams of Carbohydrates in the Meal: <input type="number" id="input2_2" name="input2_2" min="60" max="120" required ></p>
              <p id="physic_title">Total Grams Processed by 1 unit of rapid acting insulin: <input type="number" value="12" id="input2_3" name="input2_3" min="10" max="15" required ></p>
              <p id="physic_title">Actual blood sugar level measured before the meal: <input type="number" id="input2_4" name="input2_4" min="120" max="250" required ></p>
              <p id="physic_title">Target blood sugar before the meal: <input type="number" id="input2_5" name="input2_5" min="80" max="120" required ></p>
              <p id="physic_title">Today's Physical Activity Level <input type="number" id="input2_1" name="input2_1" min="0" max="10" required ></p>
              <p class="titles" id="plevel">Physical Activity Level</p>
              <p class="titles" id="blevel"> Blood Sugar </p>
              <div id="sampleslabel">
                  <div class="samples" id="sample1">
                      <div class="pact_div">
                          <input id="p1" type="number" name="p1" min="0" max="10" required >
                      </div>
                      <div class="blood_div">
                          <input id="b1" type="number" name="b1" min="15" max="100" required >
                      </div>
                  </div>
                  <div class="samples" id="sample2">
                      <div class="pact_div">
                          <input id="p2" type="number" name="p2" min="0" max="10" required >
                      </div>
                      <div class="blood_div">
                          <input id="b2" type="number" name="b2" min="15" max="100" required >
                      </div>
                  </div>
              </div>

              <button type="button" class="add-button" onClick="addSamplee()" name="addSample" value="addSample" >Add Sample</button>

              <button class="drop-submit-button" name="action" value="calculateInsuline" type="submit">Calculate Sensitivity</button>

          </form>

        </div>
      </div>

      <script>

          var counter = 3;
          function addSamplee(){

              var div = document.getElementById("sampleslabel");

              if(counter<=10){
                  var sampleDiv = '<div class="samples" id="sample"><div class="pact_div"><input name="p'+ counter +'" id="p'+ counter +'" type="number name="name" min="0" max="10" required ></div><div class="blood_div"><input name="b'+ counter +'" id="b' + counter + '" type="number" name="name" min="15" max="100" required ></div></div>';
                  div.innerHTML += sampleDiv;
                  counter++;
              }
              e.prventDefault();

          }


          /* When the user clicks on the button,
          toggle between hiding and showing the dropdown content */
      function myFunction() {
          document.getElementById("myDropdown").classList.toggle("show");
      }

      function chooseType(type){

          document.getElementById("testDiv").classList.remove('show');
          document.getElementById("testDiv2").classList.remove('show');
          document.getElementById("testDiv3").classList.remove('show');

          if(type=="div1"){
            document.getElementById("testDiv").classList.toggle('show');
            document.getElementById("myDropdown").classList.remove("show");
          }else if(type=="div3"){
            document.getElementById("testDiv2").classList.toggle('show');
            document.getElementById("myDropdown").classList.remove("show");
          }else if(type=="div2"){
            document.getElementById("testDiv3").classList.toggle('show');
            document.getElementById("myDropdown").classList.remove("show");
          }

      }

      // Close the dropdown menu if the user clicks outside of it
      window.onclick = function(event) {
        if (!event.target.matches('.dropbtn')) {

          var dropdowns = document.getElementsByClassName("dropdown-content");
          var i;
          for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
                testFunction();
                openDropdown.classList.remove('show');
            }
          }
        }
      }
      </script>

  </body>
</html>
